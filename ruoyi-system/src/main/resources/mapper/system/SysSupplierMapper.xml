<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.SysSupplierMapper">

    <resultMap type="SysSupplier" id="SysSupplierResult">
        <result property="supplierId"    column="supplier_id"    />
        <result property="label"    column="label"    />
        <result property="country"    column="country"    />
        <result property="province"    column="province"    />
        <result property="city"    column="city"    />
        <result property="area"    column="area"    />
        <result property="productType"    column="product_type"    />
        <result property="registrationNo"    column="registration_no"    />
        <result property="registrationNoInChina"    column="registration_no_in_china"    />
        <result property="supplierNameCn"    column="supplier_name_cn"    />
        <result property="supplierNameEn"    column="supplier_name_en"    />
        <result property="registrationTime"    column="registration_time"    />
        <result property="registrationTimeValidityPeriod"    column="registration_time_validity_period"    />
        <result property="rate"    column="rate"    />
        <result property="reviewRating"    column="review_rating"    />
        <result property="deleteFlag"    column="delete_flag"    />
        <result property="inspectionId"    column="inspection_id"    />
        <result property="contacts"    column="contacts"    />
        <result property="telephone"    column="telephone"    />
        <result property="email"    column="email"    />
        <result property="classification"    column="classification"    />
        <result property="auditStatus"    column="audit_status"    />
        <result property="inspectionStatus"    column="inspection_status"    />
        <result property="inspectionAuditStatus"    column="inspection_audit_status"    />
        <result property="dataSources"    column="data_sources"    />
        <result property="remark"    column="remark"    />
    </resultMap>

    <resultMap id="SysSupplierSysProductResult" type="SysSupplier" extends="SysSupplierResult">
        <collection property="sysProductList" ofType="SysProduct" column="supplier_id" select="selectSysProductList" />
    </resultMap>

<!--    <resultMap type="SysProduct" id="SysProductResult">-->
<!--        <result property="productId"    column="product_id"    />-->
<!--        <result property="supplierId"    column="supplier_id"    />-->
<!--        <result property="primaryCategory"    column="primary_category"    />-->
<!--        <result property="secondaryCategory"    column="secondary_category"    />-->
<!--        <result property="tertiaryCategory"    column="tertiary_category"    />-->
<!--        <result property="quaternaryCategory"    column="quaternary_category"    />-->
<!--        <result property="fifthCategory"    column="fifth_category"    />-->
<!--        <result property="productName"    column="product_name"    />-->
<!--        <result property="domesticImportedType"    column="domestic_imported_type"    />-->
<!--        <result property="productModel"    column="product_model"    />-->
<!--        <result property="quotationFlag"    column="quotation_flag"    />-->
<!--        <result property="futureField1"    column="future_field1"    />-->
<!--        <result property="futureField2"    column="future_field2"    />-->
<!--        <result property="futureField3"    column="future_field3"    />-->
<!--    </resultMap>-->

    <sql id="selectSysSupplierVo">
        select supplier_id, label, country, province, city, area, product_type, registration_no, registration_no_in_china, supplier_name_cn, supplier_name_en, registration_time, registration_time_validity_period, rate, review_rating, delete_flag, inspection_id, contacts, telephone, email, classification, audit_status, inspection_status, inspection_audit_status, data_sources, remark from sys_supplier
    </sql>

    <select id="selectSysSupplierList" parameterType="SysSupplier" resultMap="SysSupplierResult">
        <include refid="selectSysSupplierVo"/>
        <where>
            <if test="label != null "> and label = #{label}</if>
            <if test="country != null  and country != ''"> and country = #{country}</if>
            <if test="province != null  and province != ''"> and province like concat('%',#{province},'%')</if>
            <if test="city != null  and city != ''"> and city like concat('%',#{city},'%') </if>
            <if test="area != null  and area != ''"> and area like concat('%',#{area},'%') </if>
            <if test="productType != null  and productType != ''"> and product_type like concat('%',#{productType},'%') </if>
            <if test="registrationNo != null  and registrationNo != ''"> and registration_no like concat('%',#{registrationNo},'%') </if>
            <if test="registrationNoInChina != null  and registrationNoInChina != ''"> and registration_no_in_china like concat('%',#{registrationNoInChina},'%')</if>
            <if test="supplierNameCn != null  and supplierNameCn != ''"> and supplier_name_cn like concat('%',#{supplierNameCn},'%') </if>
            <if test="supplierNameEn != null  and supplierNameEn != ''"> and supplier_name_en like concat('%',#{supplierNameEn},'%') </if>
            <if test="registrationTime != null "> and registration_time = #{registrationTime}</if>
            <if test="registrationTimeValidityPeriod != null "> and registration_time_validity_period = #{registrationTimeValidityPeriod}</if>
            <if test="rate != null  and rate != ''"> and rate = #{rate}</if>
            <if test="reviewRating != null  and reviewRating != ''"> and review_rating = #{reviewRating}</if>
            <if test="inspectionId != null  and inspectionId != ''"> and inspection_id = #{inspectionId}</if>
            <!--            <if test="contacts != null  and contacts != ''"> and contacts like concat('%',#{contacts},'%') </if>-->
            <!--            <if test="telephone != null  and telephone != ''"> and telephone  </if>-->
            <!--            <if test="email != null  and email != ''"> and email like concat('%',#{email},'%') </if>-->
            <if test="classification != null "> and classification = #{classification}</if>
            <if test="auditStatus != null "> and audit_status = #{auditStatus}</if>
            <if test="inspectionStatus != null "> and inspection_status = #{inspectionStatus}</if>
            <if test="inspectionAuditStatus != null "> and inspection_audit_status = #{inspectionAuditStatus}</if>
            <if test="dataSources != null "> and data_sources = #{dataSources}</if>
            <if test="deleteFlag != null "> and delete_flag = #{deleteFlag}</if>
        </where>
    </select>
    
    <select id="selectSysSupplierBySupplierId" parameterType="String" resultMap="SysSupplierSysProductResult">
        select supplier_id, label, country, province, city, area, product_type, registration_no, registration_no_in_china, supplier_name_cn, supplier_name_en, registration_time, registration_time_validity_period, rate, review_rating, delete_flag, inspection_id, contacts, telephone, email, classification, audit_status, inspection_status, inspection_audit_status, data_sources, remark, future_field1, future_field2, future_field3, future_field4, future_field5
        from sys_supplier
        where supplier_id = #{supplierId}
    </select>

<!--    <select id="selectSysProductList" resultMap="SysProductResult">-->
<!--        select product_id, supplier_id, primary_category, secondary_category, tertiary_category, quaternary_category, fifth_category, product_name, domestic_imported_type, product_model, quotation_flag, future_field1, future_field2, future_field3-->
<!--        from sys_product-->
<!--        where supplier_id = #{supplier_id}-->
<!--    </select>-->

    <insert id="insertSysSupplier" parameterType="SysSupplier">
        insert into sys_supplier
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="supplierId != null">supplier_id,</if>
            <if test="label != null">label,</if>
            <if test="country != null and country != ''">country,</if>
            <if test="province != null">province,</if>
            <if test="city != null">city,</if>
            <if test="area != null">area,</if>
            <if test="productType != null">product_type,</if>
            <if test="registrationNo != null and registrationNo != ''">registration_no,</if>
            <if test="registrationNoInChina != null">registration_no_in_china,</if>
            <if test="supplierNameCn != null">supplier_name_cn,</if>
            <if test="supplierNameEn != null">supplier_name_en,</if>
            <if test="registrationTime != null">registration_time,</if>
            <if test="registrationTimeValidityPeriod != null">registration_time_validity_period,</if>
            <if test="rate != null">rate,</if>
            <if test="reviewRating != null">review_rating,</if>
            <if test="deleteFlag != null">delete_flag,</if>
            <if test="inspectionId != null">inspection_id,</if>
            <if test="contacts != null">contacts,</if>
            <if test="telephone != null">telephone,</if>
            <if test="email != null">email,</if>
            <if test="classification != null">classification,</if>
            <if test="auditStatus != null">audit_status,</if>
            <if test="inspectionStatus != null">inspection_status,</if>
            <if test="inspectionAuditStatus != null">inspection_audit_status,</if>
            <if test="dataSources != null">data_sources,</if>
            <if test="remark != null">remark,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="supplierId != null">#{supplierId},</if>
            <if test="label != null">#{label},</if>
            <if test="country != null and country != ''">#{country},</if>
            <if test="province != null">#{province},</if>
            <if test="city != null">#{city},</if>
            <if test="area != null">#{area},</if>
            <if test="productType != null">#{productType},</if>
            <if test="registrationNo != null and registrationNo != ''">#{registrationNo},</if>
            <if test="registrationNoInChina != null">#{registrationNoInChina},</if>
            <if test="supplierNameCn != null">#{supplierNameCn},</if>
            <if test="supplierNameEn != null">#{supplierNameEn},</if>
            <if test="registrationTime != null">#{registrationTime},</if>
            <if test="registrationTimeValidityPeriod != null">#{registrationTimeValidityPeriod},</if>
            <if test="rate != null">#{rate},</if>
            <if test="reviewRating != null">#{reviewRating},</if>
            <if test="deleteFlag != null">#{deleteFlag},</if>
            <if test="inspectionId != null">#{inspectionId},</if>
            <if test="contacts != null">#{contacts},</if>
            <if test="telephone != null">#{telephone},</if>
            <if test="email != null">#{email},</if>
            <if test="classification != null">#{classification},</if>
            <if test="auditStatus != null">#{auditStatus},</if>
            <if test="inspectionStatus != null">#{inspectionStatus},</if>
            <if test="inspectionAuditStatus != null">#{inspectionAuditStatus},</if>
            <if test="dataSources != null">#{dataSources},</if>
            <if test="remark != null">#{remark},</if>
         </trim>
    </insert>

    <update id="updateSysSupplier" parameterType="SysSupplier">
        update sys_supplier
        <trim prefix="SET" suffixOverrides=",">
            <if test="label != null">label = #{label},</if>
            <if test="country != null and country != ''">country = #{country},</if>
            <if test="province != null">province = #{province},</if>
            <if test="city != null">city = #{city},</if>
            <if test="area != null">area = #{area},</if>
            <if test="productType != null">product_type = #{productType},</if>
            <if test="registrationNo != null and registrationNo != ''">registration_no = #{registrationNo},</if>
            <if test="registrationNoInChina != null">registration_no_in_china = #{registrationNoInChina},</if>
            <if test="supplierNameCn != null">supplier_name_cn = #{supplierNameCn},</if>
            <if test="supplierNameEn != null">supplier_name_en = #{supplierNameEn},</if>
            <if test="registrationTime != null">registration_time = #{registrationTime},</if>
            <if test="registrationTimeValidityPeriod != null">registration_time_validity_period = #{registrationTimeValidityPeriod},</if>
            <if test="rate != null">rate = #{rate},</if>
            <if test="reviewRating != null">review_rating = #{reviewRating},</if>
            <if test="inspectionId != null">inspection_id = #{inspectionId},</if>
            <if test="contacts != null">contacts = #{contacts},</if>
            <if test="telephone != null">telephone = #{telephone},</if>
            <if test="email != null">email = #{email},</if>
            <if test="classification != null">classification = #{classification},</if>
            <if test="auditStatus != null">audit_status = #{auditStatus},</if>
            <if test="inspectionStatus != null">inspection_status = #{inspectionStatus},</if>
            <if test="inspectionAuditStatus != null">inspection_audit_status = #{inspectionAuditStatus},</if>
            <if test="dataSources != null">data_sources = #{dataSources},</if>
            <if test="remark != null">remark = #{remark},</if>
        </trim>
        where supplier_id = #{supplierId}
    </update>

    <update id="deleteSysSupplierBySupplierId" parameterType="String">
        update  sys_supplier set delete_flag=1 where supplier_id = #{supplierId}
    </update>

    <update id="deleteSysSupplierBySupplierIds" parameterType="String">
        update  sys_supplier set delete_flag=1 where supplier_id in
        <foreach item="supplierId" collection="array" open="(" separator="," close=")">
            #{supplierId}
        </foreach>
    </update>
    
<!--    <delete id="deleteSysProductBySupplierIds" parameterType="String">-->
<!--        delete from sys_product where supplier_id in -->
<!--        <foreach item="supplierId" collection="array" open="(" separator="," close=")">-->
<!--            #{supplierId}-->
<!--        </foreach>-->
<!--    </delete>-->

<!--    <delete id="deleteSysProductBySupplierId" parameterType="String">-->
<!--        delete from sys_product where supplier_id = #{supplierId}-->
<!--    </delete>-->

<!--    <insert id="batchSysProduct">-->
<!--        insert into sys_product( product_id, supplier_id, primary_category, secondary_category, tertiary_category, quaternary_category, fifth_category, product_name, domestic_imported_type, product_model, quotation_flag, future_field1, future_field2, future_field3) values-->
<!--        <foreach item="item" index="index" collection="list" separator=",">-->
<!--            ( #{item.productId}, #{item.supplierId}, #{item.primaryCategory}, #{item.secondaryCategory}, #{item.tertiaryCategory}, #{item.quaternaryCategory}, #{item.fifthCategory}, #{item.productName}, #{item.domesticImportedType}, #{item.productModel}, #{item.quotationFlag}, #{item.futureField1}, #{item.futureField2}, #{item.futureField3})-->
<!--        </foreach>-->
<!--    </insert>-->
</mapper>