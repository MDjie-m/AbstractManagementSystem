<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tianyi.sim.mapper.SimNbListMapper">
    
    <resultMap type="SimNbList" id="SimNbListResult">
        <result property="provId"    column="prov_id"    />
        <result property="provName"    column="prov_name"    />
        <result property="areaId"    column="area_id"    />
        <result property="areaName"    column="area_name"    />
        <result property="custId"    column="cust_id"    />
        <result property="custName"    column="cust_name"    />
        <result property="prodInstId"    column="prod_inst_id"    />
        <result property="accNbr"    column="acc_nbr"    />
        <result property="mainOfferName"    column="main_offer_name"    />
        <result property="netStyle"    column="net_style"    />
        <result property="abnormalReason"    column="abnormal_reason"    />
        <result property="yyyymmdd"    column="yyyymmdd"    />
    </resultMap>

    <sql id="selectSimNbListVo">
        select prov_id, prov_name, area_id, area_name, cust_id, cust_name, prod_inst_id, acc_nbr, main_offer_name, net_style, abnormal_reason, yyyymmdd from sim_nb_ab_list
    </sql>

    <select id="selectSimNbListList" parameterType="SimNbList" resultMap="SimNbListResult">
        <include refid="selectSimNbListVo"/>
        <where>  
            <if test="provId != null "> and prov_id = #{provId}</if>
            <if test="provName != null  and provName != ''"> and prov_name like concat('%', #{provName}, '%')</if>
            <if test="areaId != null "> and area_id = #{areaId}</if>
            <if test="areaName != null  and areaName != ''"> and area_name like concat('%', #{areaName}, '%')</if>
            <if test="custId != null "> and cust_id = #{custId}</if>
            <if test="custName != null  and custName != ''"> and cust_name = #{custName}</if>
            <if test="prodInstId != null "> and prod_inst_id = #{prodInstId}</if>
            <if test="accNbr != null "> and acc_nbr = #{accNbr}</if>
            <if test="mainOfferName != null  and mainOfferName != ''"> and main_offer_name like concat('%', #{mainOfferName}, '%')</if>
            <if test="netStyle != null  and netStyle != ''"> and net_style = #{netStyle}</if>
            <if test="abnormalReason != null  and abnormalReason != ''"> and abnormal_reason like concat('%', #{abnormalReason}, '%')</if>
            <if test="yyyymmdd != null  and yyyymmdd != ''"> and yyyymmdd = #{yyyymmdd}</if>
        </where>
    </select>
    
    <select id="selectSimNbListByProvId" parameterType="Long" resultMap="SimNbListResult">
        <include refid="selectSimNbListVo"/>
        where prov_id = #{provId}
    </select>

    <insert id="insertSimNbList" parameterType="SimNbList">
        insert into sim_nb_ab_list
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="provId != null">prov_id,</if>
            <if test="provName != null and provName != ''">prov_name,</if>
            <if test="areaId != null">area_id,</if>
            <if test="areaName != null and areaName != ''">area_name,</if>
            <if test="custId != null">cust_id,</if>
            <if test="custName != null and custName != ''">cust_name,</if>
            <if test="prodInstId != null">prod_inst_id,</if>
            <if test="accNbr != null">acc_nbr,</if>
            <if test="mainOfferName != null and mainOfferName != ''">main_offer_name,</if>
            <if test="netStyle != null and netStyle != ''">net_style,</if>
            <if test="abnormalReason != null and abnormalReason != ''">abnormal_reason,</if>
            <if test="yyyymmdd != null and yyyymmdd != ''">yyyymmdd,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="provId != null">#{provId},</if>
            <if test="provName != null and provName != ''">#{provName},</if>
            <if test="areaId != null">#{areaId},</if>
            <if test="areaName != null and areaName != ''">#{areaName},</if>
            <if test="custId != null">#{custId},</if>
            <if test="custName != null and custName != ''">#{custName},</if>
            <if test="prodInstId != null">#{prodInstId},</if>
            <if test="accNbr != null">#{accNbr},</if>
            <if test="mainOfferName != null and mainOfferName != ''">#{mainOfferName},</if>
            <if test="netStyle != null and netStyle != ''">#{netStyle},</if>
            <if test="abnormalReason != null and abnormalReason != ''">#{abnormalReason},</if>
            <if test="yyyymmdd != null and yyyymmdd != ''">#{yyyymmdd},</if>
         </trim>
    </insert>

    <update id="updateSimNbList" parameterType="SimNbList">
        update sim_nb_ab_list
        <trim prefix="SET" suffixOverrides=",">
            <if test="provName != null and provName != ''">prov_name = #{provName},</if>
            <if test="areaId != null">area_id = #{areaId},</if>
            <if test="areaName != null and areaName != ''">area_name = #{areaName},</if>
            <if test="custId != null">cust_id = #{custId},</if>
            <if test="custName != null and custName != ''">cust_name = #{custName},</if>
            <if test="prodInstId != null">prod_inst_id = #{prodInstId},</if>
            <if test="accNbr != null">acc_nbr = #{accNbr},</if>
            <if test="mainOfferName != null and mainOfferName != ''">main_offer_name = #{mainOfferName},</if>
            <if test="netStyle != null and netStyle != ''">net_style = #{netStyle},</if>
            <if test="abnormalReason != null and abnormalReason != ''">abnormal_reason = #{abnormalReason},</if>
            <if test="yyyymmdd != null and yyyymmdd != ''">yyyymmdd = #{yyyymmdd},</if>
        </trim>
        where prov_id = #{provId}
    </update>

    <delete id="deleteSimNbListByProvId" parameterType="Long">
        delete from sim_nb_ab_list where prov_id = #{provId}
    </delete>

    <delete id="deleteSimNbListByProvIds" parameterType="String">
        delete from sim_nb_ab_list where prov_id in
        <foreach item="provId" collection="array" open="(" separator="," close=")">
            #{provId}
        </foreach>
    </delete>
</mapper>